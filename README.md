# Общие фронтовые модули Abak-press

Модули могут использоваться между всеми проектами и гемами (единственное условие - подключенный вебпак). В модлях нет готовых сборок, все они собираются проектным вебпаком.

- [Использование](#Использование)
- [Разработак](#Разработак)
- [Публикация](#Публикация)
- [Список модулей](modules-list/README.md)

## Использование

В проекте или геме установить npm пакет
```
npm i apress-utils-front
```

**Подключить модуль можно двумя способами:**
1. В существующий скрипт импортировать нужный модуль и использовать классы/функции/объекты предоставляемые модулем
```
import { demoModule } from 'apress-utils-front/demo-module';
demoModule();
```
2. Подключить модуль в пакедж как же как обычные проектные модули
*применимо для модулей вида app.modules.moduleName = (() => {})()*
```
import 'apress-utils-front/demo-module'
```

## Разработак

Для начало нужно установить инструмент для локального подключения npm пакетов ```nmp i yalc -g```

*Начальное подключение:*
1. В папке apress-utils-front публикуем пакет локально ```yalc publish```
2. В папке проекта/гема подключаем пакет ```yalc add apress-utils-front```
3. Пересобираем npm пакеты ```dip yarn install```

*После изменений в модуле:*
1. В папке apress-utils-front публикуем пакет локально ```yalc publish```
2. В папке проекта/гема подключаем пакет ```yalc update```
3. Пересобираем npm пакеты ```dip yarn install```

*Обновление можно сократить до одной команды, например:*
```
(cd ../apress-utils-front/ && yalc publish) && yalc update && dip yarn install
```

После внесения изменений и отправки ПР не забываем отключить локальный пакет ```yalc remove apress-utils-front```

***Важно! При создании нового модуля нужно добавить файл `README.md` с описанием модуля и примерами использования.Так же нужно добавить ссылку на модуль в `modules-list/README.md`***

## Публикация

Подключаемся к приватному registry ```sudo npm adduser --registry https://registry.railsc.ru```

1. Вносим изменения
2. Обновляем версию в ```package.json```
3. Отправляем ПР, ждем мержа
4. Когда все смержено публикуем новую версию пакета ```sudo npm publish```
5. Обновляем модуль в проекте
